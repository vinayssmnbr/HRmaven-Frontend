<app-sidebar></app-sidebar>
<app-header></app-header>
<div class="main">
  <div class="selection">
    <div class="input_left">
      <div class="input_field">
        <input type="text" class="number1 no-spin" placeholder="Id or Name" [(ngModel)]="query" id="search">
        <i class="fa-solid fa-magnifying-glass"></i>
      </div>

      <div class="dropdown_content" (mouseleave)="contentdropdown = false">
        <div class="dropdwon_select" (click)="dropdownOpen()">
          <div class="drop-icon">
            <p>{{Selectvariable}}</p>
            <div class="input_icon">
              <i class="fa-sharp fa-solid fa-caret-down"></i>
            </div>
          </div>
        </div>
        <div class="select_content" *ngIf="contentdropdown" (mouseleave)="dropdownClose()" >
          <ul>
            <li *ngFor="let arr of array; index as i"  [class.select_active]="i === colorvariable"
              (click)="Changeselect(arr)">
              {{arr.name}}</li>
          </ul>
        </div>
      </div>
    </div>
    <button class="btn3"  (click)="openModal()"><i class="fa-solid fa-circle-plus"></i>Add Employee</button>
  </div>

  <div class="table-wrapper">
    <table>
      <thead>
        <tr class="table-row">
          <th class="employee">Employee ID</th>
          <th class="name">Name</th>
          <th class="email">Designation</th>
          <th class="designation">Email</th>
          <th class="action">Contact</th>
          <th class="contact">Action</th>
        </tr>
      </thead>

      <tbody>

        <tr *ngFor="let user of employee  | employeefilter:query:Selectvariable">
          <!--  -->
          <td colspan="7" class="nodata" class="no_data" *ngIf="user.found=='true'" style="text-align:center;">
            <p > <img src="assets/images/no_record.png" alt="" class="center"></p>
            <h2>No Record Found!</h2>
        </td>
          <!--  -->
          <td class="employee1" *ngIf="user.found!='true'">{{user.uid}}</td>
          <td class="name1" *ngIf="user.found!='true'">
            <img src="./assets/images/clickup60_4.png" alt="">{{user.name}}
          </td>
          <td class="designation1" *ngIf="user.found!='true'">{{user.designation}}</td>
          <td class="email1" *ngIf="user.found!='true'">{{user.email}}</td>
          <td class="contact1" *ngIf="user.found!='true'">{{user.mobile}}</td>
          <td class="action1" *ngIf="user.found!='true'">
            <div class="icons">
              <img src="./assets/images/Vector.svg" alt="" routerLink="/dashboard/employee-profile"
                (click)="selectEmployee(user)">
              <i class="fa-solid fa-trash-can" (click)="todelete(user)"></i>
            </div>
          </td>
        </tr>
      </tbody>

    </table>
  </div>

  <div class="modal" *ngIf="showModal">
    <div class="modal-content" *ngIf="showModalContent">
      <div class="modal-header">
        <div class="header-title">
        <h4 class="modal-title">Add New Employee</h4>
        </div>
        <div class="details_row">
          <span class="active">1. Personal Details</span>
          <span>2. Contact Details</span>
          <span>3. Job Details</span>
        </div>
        <i class="fa-solid fa-xmark" (click)="closeModal()"></i>
      </div>
    </div>
    <div class="modal" *ngIf="showModal">
      <div class="modal-content" *ngIf="showModalContent">
        <div class="modal-header">
          <h4 class="modal-title">Add New Employee</h4>
          <i class="fa-solid fa-xmark" (click)="closeModal()"></i>
        </div>
        <div class="modal-body">
          <!-- <div class="numbers">
            <div class="number next " [ngClass]="{'active':firstStep,'inactive':!firstStep}"><span
                [ngClass]="{'active':firstStep , 'inactive':!firstStep}">1</span>
            </div>
            <div class="number next  " [ngClass]="{'active':secondStep ,'inactive':!secondStep && !firstStep}"><span
                [ngClass]="{'active':secondStep ,'inactive':!secondStep && !firstStep}">2</span></div>
            <div class="number  prev" [ngClass]="{'active':thirdStep}"><span [ngClass]="{'active':thirdStep}">3</span>
            </div>
          </div>
          <div class="details">
            <p class="active1" [ngClass]="{'activate':firstStep ,'inactivate':!firstStep}">Basic Details</p>
            <p class=" active1 notactive1" [ngClass]="{'activate':secondStep ,'inactivate':!firstStep}">Contact Details
            </p>
            <p class=" active1 notactive2" [ngClass]="{'activate':thirdStep}">Personal Particulars</p>
          </div> -->




          <form class="form-container" id="form1" [formGroup]="form" *ngIf="firstStep" (ngSubmit)="submit(form.value)">
            <div class="form-row">
              <div class="input">
                <label>Name <span>*</span></label>
                <input type="name" id="text1" placeholder="Zana Jones" formControlName="name"
                  [ngClass]="{'ng_invalid': registrationFormControl.name.invalid && registrationFormControl.name.dirty,'ng_valid': registrationFormControl.name.valid}">

              </div>
               <div class="input">
                <label>Designation <span>*</span></label>
                <div class="dropdown_container" (mouseleave)="contentdropdown3 = false">
                  <div class="dropdwon_select" (click)="dropdownOpen3()" id="slt1">

                    <input type="text" [(ngModel)]="Selectvariable6" formControlName="designation" id="text8" readonly>
                    <span><i class="fa-sharp fa-solid fa-caret-down"></i></span>
                  </div>
                  <div class="select_content1" *ngIf="contentdropdown3" (mouseleave)="dropdownClose3()">
                    <ul>
                      <li *ngFor="let arr6 of array6; index as i" [class.select_active]="i === colorvariable6"
                        (click)="Changeselect6(arr6)">
                        {{arr6.name}}</li>
                    </ul>
                  </div>
                </div>
              </div>

            </div>
            <div class="form-row">
              <div class="input">
                <label>Employee ID <span>*</span></label>
                <input type="number" class="no-spin" id="text3" [(ngModel)]="currentEmployeeUid" formControlName="uid"
                  pattern="^[^\s]+$" [disabled]="true" readonly>
              </div>
              <div class="input">
                <label>Date of Joining <span>*</span></label>
                <input type="date" id="text4" placeholder="DD/MM/YYYY" formControlName="dateOfJoining"
                  (click)="openDatePicker()">
              </div>
            </div>
            <div class="form-row">
              <div class="input">
                <label>Date of Birth <span>*</span></label>
                <input type="date" id="text5" placeholder="DD/MM/YYYY" formControlName="dateOfBirth">
              </div>
              <div class="input">
                <label>Gender <span>*</span></label>
                <div class="dropdown_container" (mouseleave)="contentdropdown1 = false">
                  <div class="dropdwon_select" (click)="dropdownOpen1()" id="slt1">
                    <!-- <p >{{Selectvariable1}}</p> -->
                    <input type="text" [(ngModel)]="Selectvariable1" formControlName="gender" id="text9" readonly>
                    <span><i class="fa-sharp fa-solid fa-caret-down"></i></span>
                  </div>
                  <div class="select_content1" *ngIf="contentdropdown1" (mouseleave)="dropdownClose1()">
                    <ul>
                      <li *ngFor="let arr1 of array1; index as i" [class.select_active]="i === colorvariable1"
                        (click)="Changeselect1(arr1)">
                        {{arr1.name}}</li>
                    </ul>
                  </div>
                </div>

              </div>
            </div>
          </form>


          <form class="form-container " id="form2" [formGroup]="form" *ngIf="secondStep">
            <div class="form-row">
              <div class="input">
                <label>Mobile No. <span>*</span></label>
                <input type="number" class="no-spin" id="text6" pattern="[6-9]{1}[0-9]{9}" maxlength="10"
                  placeholder="XXXXXX0652" formControlName="mobile" class=" no-spin"
                  [ngClass]="{'ng_invalid': registrationFormControl.mobile.invalid && registrationFormControl.mobile.dirty,'ng_valid': registrationFormControl.mobile.valid}">

              </div>
              <div class="input">
                <label>Email <span>*</span></label>
                <input type="email" id="text7" placeholder="smriti123@gmail.com" formControlName="email"  pattern="[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{1,63}$"
                  [ngClass]="{'ng_invalid': registrationFormControl.email.invalid && registrationFormControl.email.dirty,'ng_valid': registrationFormControl.email.valid}">

              </div>
            </div>
            <div class="form-row">
              <div class="input">
                <label>Address <span>*</span></label>
                <textarea placeholder="Enter Employee Address..." cols="80" rows="8" id="text2"
                  formControlName="address"></textarea>
              </div>
            </div>
          </form>



          <form class="form-container " id="form3" [formGroup]="form" *ngIf="thirdStep">
            <div class="form-row">
              <div class="input">
                <label>Bank Name <span>*</span></label>
                <div class="dropdown_container" (mouseleave)="contentdropdown2 = false">
                  <div class="dropdwon_select" (click)="dropdownOpen2()" id="slt2">
                    <p>{{Selectvariable2}}</p>
                    <span><i class="fa-sharp fa-solid fa-caret-down"></i></span>
                  </div>
                  <div class="select_content1" *ngIf="contentdropdown2" (mouseleave)="dropdownClose2()">
                    <ul>
                      <li *ngFor="let arr2 of array2; index as i" [class.select_active]="i === colorvariable2"
                        (click)="Changeselect2(arr2)">
                        {{arr2.name}}</li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="input">
                <label>Account Number <span>*</span></label>
                <input type="number" id="text10" placeholder="10309856890" formControlName="accountno"  pattern="[0-9]{9,16}"
                  class=" no-spin"
                  [ngClass]="{'ng_invalid': registrationFormControl.accountno.invalid && registrationFormControl.accountno.dirty,'ng_valid': registrationFormControl.accountno.valid}">

              </div>
            </div>
            <div class="form-row">
              <div class="input">
                <label>IFSC Code <span>*</span></label>
                <input type="text" id="text11" placeholder="SBINXXXXXXXX" formControlName="ifsc" maxlength="12"
                  oninput="this.value = this.value.toUpperCase()"
                  [ngClass]="{'ng_invalid': registrationFormControl.ifsc.invalid && registrationFormControl.ifsc.dirty,'ng_valid': registrationFormControl.ifsc.valid}">

              </div>
              <div class="input">
                <label>Aadhar Card No. <span>*</span></label>
                <input type="number" class="no-spin" id="text12" placeholder="XXXXXXXX6709" pattern="[0-9]{12}" maxlength="12"
                  formControlName="adhaarno" [ngClass]="{'ng_invalid': registrationFormControl.adhaarno.invalid && registrationFormControl.adhaarno.dirty,'ng_valid': registrationFormControl.adhaarno.valid}">

              </div>
            </div>
            <div class="form-row">
              <div class="input">
                <label>PAN number <span>*</span></label>
                <input type="text" id="text13" placeholder="ABCTY1234D" formControlName="panno" maxlength="10"
                  oninput="this.value = this.value.toUpperCase()"
                  [ngClass]="{'ng_invalid': registrationFormControl.panno.invalid && registrationFormControl.panno.dirty,'ng_valid': registrationFormControl.panno.valid}">

              </div>
            </div>
          </form>
        </div>

        <div class="modal-footer">
          <button *ngIf="firstStep" (click)="onNextForm()" class="next-btn"
            [disabled]="!(this.form.controls.name.valid && this.form.controls.dateOfBirth.valid  && this.form.controls.dateOfJoining.valid)">
            Next </button>
          <button *ngIf="secondStep" (click)="onPreviousForm()" class="back-btn">Back</button>
          <button *ngIf="secondStep" (click)="nextForm1()" class="next-btn"
            [disabled]="!(this.form.controls.mobile.valid && this.form.controls.email.valid && this.form.controls.address.valid)">Next</button>
          <button *ngIf="thirdStep" (click)="previousForm1()" class="back-btn">Back</button>
          <button type="submit" *ngIf="thirdStep"
            [disabled]="!(this.form.controls.accountno.valid && this.form.controls.adhaarno.valid && this.form.controls.panno.valid && this.form.controls.ifsc.valid)"
            class="done-btn" (click)="submit(form.value)">Done</button>
        </div>
      </div>
      <div class="modal-content2" *ngIf="fourthStep">
        <div class="modal-header2">
          <i class="fa-solid fa-circle-check" style="color: #3D9030; font-size: 60px;"></i>
        </div>
        <div class="modal-body2">
          <h3>New employee added successfully!</h3>
          <p>You can add more employees in a similar way
            and edit them when necessary.</p>
          <button class="done-btn2" (click)="closeModal()">Done</button>
        </div>
      </div>

      <div class="modal-content3" *ngIf="rowdelete">
        <div class="modal-body3">
          <h4>Do you really want to delete this employee?</h4>
          <div class="delete-btns">
            <button class="yes-btn" (click)="successdelete()">Yes</button>
            <button class="no-btn" (click)="closeModal2()">No</button>
          </div>

          <i class="fa-solid fa-xmark second" (click)="closeModal2()"></i>
        </div>
      </div>
      <div class="modal-content4" *ngIf="deletemessage">
        <div class="modal-header4">
          <img src="./assets/images/tick.png" alt="img">
        </div>
        <div class="modal-body4">
          <h3>Employee deleted successfully!</h3>
          <button class="done-btn2" (click)="closeModal3()">Done</button>
        </div>
      </div>

    </div>
  </div>
</div>
